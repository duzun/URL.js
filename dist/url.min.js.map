{"version":3,"file":"url.min.js","sources":["../url/helpers.js","../url/toObject.js","../url/parseUrl.js","../url/fromObject.js","../url/fromLocation.js","../url/URL.js"],"sourcesContent":["\nexport const NIL = '';\n\nconst _is_url_r_ = /^[\\w.+\\-]{3,20}\\:\\/\\/[a-z0-9]/i;\nconst _is_domain_r_ = /^[a-z0-9][0-9a-z_\\-]*(?:\\.[a-z0-9][0-9a-z_\\-]*)*$/;\n\nexport function is_url(str) {\n    return _is_url_r_.test(str);\n}\n\nexport function is_domain(str) {\n    return _is_domain_r_.test(str);\n}\n\nexport function decodeAmp(str) {\n    return String(str).replace(/%26/g, '&');\n}\n\nexport function encodeAmp(str) {\n    return String(str).replace(/\\&/g, '%26');\n}\n\nexport function urldecode(str) {\n    return decodeURIComponent(String(str).replace(/\\+/g, '%20'));\n}\n","import { decodeAmp, urldecode, NIL } from './helpers';\n\nconst _excludeQueryChart_r_ = /[\\t\\r\\n\\x09]/g;\n\nexport default function toObject(str, sep, eq, ndec) {\n    if (sep == undefined) sep = '&';\n    if (eq == undefined) eq = '=';\n    var j = String(str.replace(_excludeQueryChart_r_, NIL)).split(sep)\n        , i = j.length\n        , a = {}\n        , t\n        ;\n    ndec = ndec ? decodeAmp : urldecode;\n    while (i-- > 0) if (t = j[i]) {\n        t = t.split(eq);\n        j[i] = t.splice(0, 1)[0];\n        t = t.join(eq);\n        a[ndec(j[i])] = ndec(t);\n    }\n    return a;\n}\n","import { NIL } from './helpers';\nimport toObject from './toObject';\n\n/*globals URL*/\n\nconst _parse_url_exp = new RegExp([\n    '^([\\\\w.+\\\\-\\\\*]+:)//'          // protocol\n    , '(([^:/?#]*)(?::([^/?#]*))?@|)' // username:password\n    , '(([^:/?#]*)(?::(\\\\d+))?)'      // host == hostname:port\n    , '(/[^?#]*|)'                    // pathname\n    , '(\\\\?([^#]*)|)'                 // search & query\n    , '(#.*|)$'                       // hash\n].join(NIL));\n\nconst _parse_url_map = {\n    protocol: 1\n    , username: 3\n    , password: 4\n    , host: 5\n    , hostname: 6\n    , port: 7\n    , pathname: 8\n    , search: 9\n    , query: 10\n    , hash: 11\n};\n\nexport default function parseUrl(href, part, parseQuery) {\n    href = String(href);\n    var match = href.match(_parse_url_exp)\n        , map = _parse_url_map\n        , i, ret = false\n        ;\n    if (match) {\n        if (part && part in map) {\n            ret = match[map[part]] || NIL;\n            if (part == 'pathname') {\n                if (!ret) ret = '/';\n            }\n            if (parseQuery && part == 'query') {\n                ret = toObject(ret || NIL);\n            }\n        }\n        else {\n            let _ = this;\n            if(typeof _ != 'function') {\n                _ = typeof URL == 'function' && URL.createObjectURL ? URL : Object;\n                ret = new _(href);\n                // ret.toString = function _uri_to_string_() {\n                //     return fromLocation(this);\n                // };\n            }\n            else {\n                ret = new _(); // URLJS() constructor?\n            }\n\n            for (i in map) if (map.hasOwnProperty(i)) {\n                ret[i] = match[map[i]] || NIL;\n            }\n            if (!ret.pathname) ret.pathname = '/';\n            ret.path = ret.pathname + ret.search;\n            ret.origin = ret.protocol + '//' + ret.host;\n            ret.domain = ret.hostname.replace(/^www./, NIL).toLowerCase();\n            if (parseQuery) ret.query = toObject(ret.query || NIL);\n            ret.href = String(href); // ??? may need some parse\n            if (part) ret = ret[part];\n        }\n    }\n    return ret;\n}\n","import { encodeAmp, NIL } from './helpers';\n\nexport default function fromObject(o, pref, nenc) {\n    var r = Object.keys(o),\n        i = r.length,\n        n, v;\n\n    if (!r.length) return pref ? pref + '' : '';\n\n    r.sort();\n    nenc = nenc ? encodeAmp : encodeURIComponent;\n    for (; i--;) {\n        n = r[i];\n        v = o[n];\n        if (v == null) r.splice(i, 1);\n        else {\n            n = nenc(n);\n            if (v !== NIL) n += '=' + nenc(v);\n            r[i] = n;\n        }\n    }\n    // Object.each(o, nenc ? function(n,v) { if(v != u) n += '=' + v; r[++i] = n } :\n    // function(n,v) { n = encodeURIComponent(n); if(v != u) n += '=' + encodeURIComponent(v); r[++i] = n }\n    // );\n    r = r.join('&');\n    if (pref) r = pref + (typeof pref != 'string' || pref.indexOf('?') < 0 ? '?' : '&') + r;\n    return r;\n}\n","import fromObject from './fromObject';\nimport { NIL } from './helpers';\n\nexport default function fromLocation(o) {\n    var url = [], t;\n    if (t = o.protocol) url.push(t.toLowerCase() + '//');\n    if ((t = o.username) || o.password) {\n        url.push(t || NIL);\n        if (t = o.password) url.push(':' + t);\n        url.push('@');\n    }\n    if (t = o.hostname) {\n        url.push(t.toLowerCase());\n        if (t = o.port) url.push(':' + t);\n    }\n    else\n        if (t = o.host) url.push(t.toLowerCase());\n\n    if (t = o.pathname) url.push((t.substr(0, 1) == '/' ? NIL : '/') + t);\n    if (t = o.search || o.query) {\n        if (typeof t == 'object') {\n            t = fromObject(t);\n        }\n        if (t && t != '?') {\n            url.push((t.substr(0, 1) == '?' ? NIL : '?') + t);\n        }\n    }\n    if (t = o.hash) url.push((t.substr(0, 1) == '#' ? NIL : '#') + t);\n\n    return url.join(NIL);\n}\n","import parseUrl from './parseUrl';\nimport fromLocation from './fromLocation';\nimport fromObject from './fromObject';\nimport toObject from './toObject';\nimport { is_domain, is_url } from './helpers';\n\n/**\n *  URL parser.\n *\n *  @license MIT\n *  @version 1.0.0\n *  @author Dumitru Uzun (DUzun.Me)\n *  @umd AMD, Browser, CommonJs, noDeps\n */\nexport default function URLJS(url, baseURL) {\n    if (url != undefined) {\n        let _url = parseUrl.call(URLJS, url);\n        if (_url !== false) return _url;\n        if (baseURL) {\n            _url = parseUrl.call(URLJS, baseURL);\n            if (_url === false) return;\n            url = String(url);\n            if (url.slice(0, 2) == '//') {\n                return parseUrl.call(URLJS, _url.protocol + url);\n            }\n            let _path;\n            if (url.slice(0, 1) == '/') {\n                _path = url;\n            }\n            else {\n                _path = _url.pathname.split('/');\n                _path[_path.length - 1] = url;\n                _path = _path.join('/');\n            }\n            return parseUrl.call(URLJS, _url.origin + _path);\n        }\n        throw new SyntaxError(`Failed to construct 'URL': Invalid URL`);\n    }\n}\n\nconst __ = URLJS.prototype;\n    // ---------------------------------------------------------------------------\nconst __ex = typeof Object.defineProperty == 'function'\n        ? (name, func, proto) => {\n            Object.defineProperty(proto || __, name, {\n                value: func,\n                configurable: true,\n                enumerable: false,\n                writeable: true\n            });\n        }\n        : (name, func, proto) => {\n            // Take care with (for ... in) on strings!\n            (proto || __)[name] = func;\n        }\n    ;\n// ---------------------------------------------------------------------------\nfunction _uri_to_string_() {\n    return fromLocation(this);\n}\n__ex('toString', _uri_to_string_);\n__ex('valueOf', _uri_to_string_);\n\n// ---------------------------------------------------------------------------\nURLJS.parseUrl = parseUrl;\nURLJS.fromLocation = fromLocation;\nURLJS.toObject = toObject;\nURLJS.fromObject = fromObject;\n// ---------------------------------------------------------------------------\nURLJS.is_url = is_url;\nURLJS.is_domain = is_domain;\n"],"names":["NIL","_is_url_r_","_is_domain_r_","decodeAmp","str","String","replace","encodeAmp","urldecode","decodeURIComponent","_excludeQueryChart_r_","toObject","sep","eq","ndec","undefined","t","j","split","i","length","a","splice","join","_parse_url_exp","RegExp","_parse_url_map","protocol","username","password","host","hostname","port","pathname","search","query","hash","parseUrl","href","part","parseQuery","match","map","ret","_","this","URL","createObjectURL","Object","hasOwnProperty","path","origin","domain","toLowerCase","fromObject","o","pref","nenc","n","v","r","keys","sort","encodeURIComponent","indexOf","fromLocation","url","push","substr","_typeof","URLJS","baseURL","_url","call","slice","_path","SyntaxError","__","prototype","__ex","defineProperty","name","func","proto","value","configurable","enumerable","writeable","_uri_to_string_","is_url","test","is_domain"],"mappings":"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"}
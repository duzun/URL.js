{"version":3,"file":"url.js","sources":["../url/helpers.js","../url/toObject.js","../url/parseUrl.js","../url/fromObject.js","../url/fromLocation.js","../url/URL.js"],"sourcesContent":["\nexport const NIL = '';\n\nconst _is_url_r_ = /^[\\w.+\\-]{3,20}\\:\\/\\/[a-z0-9]/i;\nconst _is_domain_r_ = /^[a-z0-9][0-9a-z_\\-]*(?:\\.[a-z0-9][0-9a-z_\\-]*)*$/;\nconst _www_r_ = /^www./;\n\nexport function getDomainName(hostname) {\n    return String(hostname).replace(_www_r_, NIL).toLowerCase();\n}\n\nexport function is_url(str) {\n    return _is_url_r_.test(str);\n}\n\nexport function is_domain(str) {\n    return _is_domain_r_.test(str);\n}\n\nexport function decodeAmp(str) {\n    return String(str).replace(/%26/g, '&');\n}\n\nexport function encodeAmp(str) {\n    return String(str).replace(/\\&/g, '%26');\n}\n\nexport function urldecode(str) {\n    return decodeURIComponent(String(str).replace(/\\+/g, '%20'));\n}\n\nexport function defProp(obj, prop, get, set=true) {\n    const conf = {\n        configurable: true,\n        enumerable: true,\n        writeable: true,\n    };\n    if (get) conf.get = get;\n    if (set) {\n        conf.set = set === true\n        ? function (val) {\n            delete obj[prop];\n            if (this !== obj) delete this[prop]; // obj is prototype?\n            this[prop] = val;\n        }\n        : set\n        ;\n    }\n    return Object.defineProperty(obj, prop, conf);\n}\n","import { decodeAmp, urldecode, NIL } from './helpers';\n\nconst _excludeQueryChart_r_ = /[\\t\\r\\n\\x09]/g;\n\nexport default function toObject(str, sep, eq, ndec) {\n    if (sep == undefined) sep = '&';\n    if (eq == undefined) eq = '=';\n    var j = String(str.replace(_excludeQueryChart_r_, NIL)).split(sep)\n        , i = j.length\n        , a = {}\n        , t\n        ;\n    ndec = ndec ? decodeAmp : urldecode;\n    while (i-- > 0) if (t = j[i]) {\n        t = t.split(eq);\n        j[i] = t.splice(0, 1)[0];\n        t = t.join(eq);\n        a[ndec(j[i])] = ndec(t);\n    }\n    return a;\n}\n","import { NIL, getDomainName } from './helpers';\nimport toObject from './toObject';\n\n/*globals URL*/\n\nconst _parse_url_exp = new RegExp([\n    '^([\\\\w.+\\\\-\\\\*]+:)//'          // protocol\n    , '(([^:/?#]*)(?::([^/?#]*))?@|)' // username:password\n    , '(([^:/?#]*)(?::(\\\\d+))?)'      // host == hostname:port\n    , '(/[^?#]*|)'                    // pathname\n    , '(\\\\?([^#]*)|)'                 // search & query\n    , '(#.*|)$'                       // hash\n].join(NIL));\n\nconst _parse_url_map = {\n    protocol: 1\n    , username: 3\n    , password: 4\n    , host: 5\n    , hostname: 6\n    , port: 7\n    , pathname: 8\n    , search: 9\n    , query: 10\n    , hash: 11\n};\n\nexport default function parseUrl(href, part, parseQuery) {\n    href = String(href);\n    var match = href.match(_parse_url_exp)\n        , map = _parse_url_map\n        , i, ret = false\n        ;\n    if (match) {\n        if (part && part in map) {\n            ret = match[map[part]] || NIL;\n            if (part == 'pathname') {\n                if (!ret) ret = '/';\n            }\n            if (parseQuery && part == 'query') {\n                ret = toObject(ret || NIL);\n            }\n        }\n        else {\n            let _ = this;\n            if(typeof _ != 'function') {\n                _ = typeof URL == 'function' && URL.createObjectURL ? URL : Object;\n                ret = new _(href);\n                // ret.toString = function _uri_to_string_() {\n                //     return fromLocation(this);\n                // };\n            }\n            else {\n                ret = new _(); // URLJS() constructor?\n            }\n\n            for (i in map) if (map.hasOwnProperty(i)) {\n                ret[i] = match[map[i]] || NIL;\n            }\n            if (part && part in ret) return ret[part];\n\n            if (!ret.pathname) ret.pathname = '/';\n            if (!ret.path) ret.path = ret.pathname + ret.search;\n            if (!ret.origin) ret.origin = ret.protocol + '//' + ret.host;\n            if (!ret.domain) ret.domain = getDomainName(ret.hostname);\n            if (parseQuery) ret.query = toObject(ret.query || NIL);\n            if (!ret.origin) ret.href = String(href); // ??? may need some parse\n\n            if (part) ret = ret[part];\n        }\n    }\n    return ret;\n}\n","import { encodeAmp, NIL } from './helpers';\n\nexport default function fromObject(o, pref, nenc) {\n    var r = Object.keys(o),\n        i = r.length,\n        n, v;\n\n    if (!r.length) return pref ? pref + '' : '';\n\n    r.sort();\n    nenc = nenc ? encodeAmp : encodeURIComponent;\n    for (; i--;) {\n        n = r[i];\n        v = o[n];\n        if (v == null) r.splice(i, 1);\n        else {\n            n = nenc(n);\n            if (v !== NIL) n += '=' + nenc(v);\n            r[i] = n;\n        }\n    }\n    // Object.each(o, nenc ? function(n,v) { if(v != u) n += '=' + v; r[++i] = n } :\n    // function(n,v) { n = encodeURIComponent(n); if(v != u) n += '=' + encodeURIComponent(v); r[++i] = n }\n    // );\n    r = r.join('&');\n    if (pref) r = pref + (typeof pref != 'string' || pref.indexOf('?') < 0 ? '?' : '&') + r;\n    return r;\n}\n","import fromObject from './fromObject';\nimport { NIL } from './helpers';\n\nexport default function fromLocation(o) {\n    var url = [], t;\n    if (t = o.protocol) url.push(t.toLowerCase() + '//');\n    if ((t = o.username) || o.password) {\n        url.push(t || NIL);\n        if (t = o.password) url.push(':' + t);\n        url.push('@');\n    }\n    if (t = o.hostname) {\n        url.push(t.toLowerCase());\n        if (t = o.port) url.push(':' + t);\n    }\n    else\n        if (t = o.host) url.push(t.toLowerCase());\n\n    if (t = o.pathname) url.push((t.substr(0, 1) == '/' ? NIL : '/') + t);\n    if (t = o.search || o.query) {\n        if (typeof t == 'object') {\n            t = fromObject(t);\n        }\n        if (t && t != '?') {\n            url.push((t.substr(0, 1) == '?' ? NIL : '?') + t);\n        }\n    }\n    if (t = o.hash) url.push((t.substr(0, 1) == '#' ? NIL : '#') + t);\n\n    return url.join(NIL);\n}\n","import parseUrl from './parseUrl';\nimport fromLocation from './fromLocation';\nimport fromObject from './fromObject';\nimport toObject from './toObject';\nimport { NIL, defProp, is_domain, is_url, getDomainName } from './helpers';\n\n/**\n *  URL parser.\n *\n *  @license MIT\n *  @version 2.0.0\n *  @author Dumitru Uzun (DUzun.Me)\n *  @umd AMD, Browser, CommonJs, noDeps\n */\nexport default function URLJS(url, baseURL, parseQuery) {\n    if (url != undefined) {\n        let _url = parseUrl.call(URLJS, url, undefined, parseQuery);\n        if (_url !== false) return _url;\n        if (baseURL) {\n            _url = baseURL instanceof URLJS ? baseURL : parseUrl.call(URLJS, baseURL);\n            if (_url === false) return;\n            url = String(url);\n            if (url.slice(0, 2) == '//') {\n                return parseUrl.call(URLJS, _url.protocol + url, undefined, parseQuery);\n            }\n            let _path;\n            if (url.slice(0, 1) == '/') {\n                _path = url;\n            }\n            else {\n                _path = _url.pathname.split('/');\n                _path[_path.length - 1] = url;\n                _path = _path.join('/');\n            }\n            return parseUrl.call(URLJS, _url.origin + _path, undefined, parseQuery);\n        }\n        throw new SyntaxError(`Failed to construct 'URL': Invalid URL`);\n    }\n}\n\n// ---------------------------------------------------------------------------\nURLJS.parseUrl = parseUrl;\nURLJS.fromLocation = fromLocation;\nURLJS.toObject = toObject;\nURLJS.fromObject = fromObject;\n// ---------------------------------------------------------------------------\nURLJS.is_url = is_url;\nURLJS.is_domain = is_domain;\n\n// ---------------------------------------------------------------------------\nconst __ = URLJS.prototype;\n\n// ---------------------------------------------------------------------------\nconst __ex = typeof Object.defineProperty == 'function'\n        ? (name, func, proto) => {\n            Object.defineProperty(proto || __, name, {\n                value: func,\n                configurable: true,\n                enumerable: false,\n                writeable: true\n            });\n        }\n        : (name, func, proto) => {\n            // Take care with (for ... in) on strings!\n            (proto || __)[name] = func;\n        }\n    ;\n// ---------------------------------------------------------------------------\nfunction _uri_to_string_() {\n    return fromLocation(this);\n}\n__ex('toString', _uri_to_string_);\n__ex('valueOf', _uri_to_string_);\n\n// ---------------------------------------------------------------------------\n\nif (Object.assign) {\n    Object.assign(__, {\n        protocol: undefined,\n        username: undefined,\n        password: undefined,\n        host: undefined,\n        hostname: undefined,\n        port: undefined,\n        pathname: undefined,\n        search: undefined,\n        query: undefined,\n        hash: undefined,\n    });\n}\n\ndefProp(__, 'origin',\n    function () {\n        const u = this;\n        if (u.protocol || u.host || u.hostname) {\n            return u.protocol + '//' + (u.host || (u.hostname + (u.port ? ':' + u.port : NIL)));\n        }\n    },\n    function (origin) {\n        const u = this;\n        if(u.origin == origin) return;\n        let v = new URLJS(origin, u);\n        u.protocol = v.protocol;\n        u.hostname = v.hostname;\n        u.port = v.port;\n\n        // In the case these props have been overwritten\n        // u.host = v.host;\n    }\n);\n\ndefProp(__, 'href',\n    function () { return String(this); },\n    function(href) {\n        const u = this;\n        if (u.href == href) return;\n\n        let v = new URLJS(href, u);\n        u.protocol = v.protocol;\n        u.username = v.username;\n        u.password = v.password;\n        u.hostname = v.hostname;\n        u.port = v.port;\n        u.pathname = v.pathname;\n        u.search = v.search;\n        u.hash = v.hash;\n\n        u.query = search2query(v.search, typeof u.query == 'object');\n\n        // In the case these props have been overwritten\n        // u.host = v.host;\n        // u.origin = v.origin;\n    }\n);\n\ndefProp(__, 'host',\n    function () {\n        const u = this;\n        if (u.hostname || u.port) {\n            return (u.hostname||NIL) + (u.port ? ':' + u.port : NIL);\n        }\n    },\n    function (host) {\n        const u = this;\n        if (u.host == host) return;\n\n        let v = String(host).split(':');\n        u.hostname = v.shift();\n        u.port = v.length ? v.shift() : NIL;\n    }\n);\n\ndefProp(__, 'path',\n    function () {\n        const u = this;\n        return (u.pathname || NIL) + (u.search || NIL);\n    },\n    function(path) {\n        const u = this;\n        if (u.path == path) return;\n\n        let v = String(path).split('?');\n        u.pathname = v.shift();\n        if (u.pathname.slice(0, 1) != '/') u.pathname = '/' + u.pathname;\n\n        let query = v.length ? v.join('?') : undefined;\n        u.search = query != undefined ? '?' + query : NIL;\n        u.query = typeof u.query == 'object' ? toObject(query) : query || '';\n    }\n);\n\ndefProp(__, 'pathname', () => '/');\ndefProp(__, 'domain', function () {\n    const u = this;\n    return getDomainName(u.hostname || NIL);\n});\n\n\nfunction search2query(search, asObj) {\n    let query = search ? String(search).replace(/^\\?/, NIL) : NIL;\n    return asObj ? toObject(query) : query;\n}\n"],"names":["NIL","_is_url_r_","_is_domain_r_","_www_r_","getDomainName","hostname","String","replace","toLowerCase","is_url","str","test","is_domain","decodeAmp","encodeAmp","urldecode","decodeURIComponent","defProp","obj","prop","get","set","conf","configurable","enumerable","writeable","val","Object","defineProperty","_excludeQueryChart_r_","toObject","sep","eq","ndec","undefined","j","split","i","length","a","t","splice","join","_parse_url_exp","RegExp","_parse_url_map","protocol","username","password","host","port","pathname","search","query","hash","parseUrl","href","part","parseQuery","match","map","ret","_","URL","createObjectURL","hasOwnProperty","path","origin","domain","fromObject","o","pref","nenc","r","keys","n","v","sort","encodeURIComponent","indexOf","fromLocation","url","push","substr","URLJS","baseURL","_url","call","slice","_path","SyntaxError","__","prototype","__ex","name","func","proto","value","_uri_to_string_","assign","u","search2query","shift","asObj"],"mappings":"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"}